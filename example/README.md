### About


目录包含采用`Kite`协议的Server端(`kite_srv.go`)和Client端(`kite_cli.go`)，以及采用Golang标准库`Gob`的Server端(`gob_srv.go`)和Client端(`gob_cli.go`)。

目的为测试比较`Kite`和`Gob`用于数据通信的性能。


### 测试方法

两者进行多轮`100000`次双向数据传输，比较平均耗时时间。

在两个终端分别开启server：

```
$ go run kite_srv.go
```

```
$ go run gob_srv.go
```

在另两个终端分别开启client：

```
# -l 为测试数据的长度(Byte)
# -n 为测试次数，最终结果取均值
$ go run kite_cli.go -l 128 -n 10
```

```
$ go run gob_cli.go -l 128 -n 10
```


#### 100000次数据传输（单位：s）


| 数据长度(B) | Gob | Kite (no buf)  | Kite (buf) |
| :-: | :-: | :-: | :-: |
| 128 | 3.504769 | 2.89826 | 2.775410 |
| 256 | 3.694418 | 3.054825 | 2.884503 |
| 512 | 3.868753 | 3.259936 | 3.117454 |
| 1024 | 3.880303 | 3.660790 | 3.478430 |
| 2048 | 4.355616 | 4.314310 | 4.185105 |
| 4096 | 4.986301 | 5.452495 | 6.223881 |


####  多核心测试


##### TPS测试

由于数据长度达到128B大小的时候，千兆网卡基本已经被打满

| 数据长度(B) | Gob | Kite (buf) |
| :-: | :-: | :-: | :-: |
| 16 | 220329 | 273847 |
| 32 | 212784 | 268203 |
| 128 | 200095 | 217953 |
| 512 | 168225 | 148941 |
| 1024 | 143328 | 110702 |
| 4096 | 80554 | 41175 |

